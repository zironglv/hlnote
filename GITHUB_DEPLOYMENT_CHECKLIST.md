# GitHub Actions 部署检查清单

## ✅ 项目状态检查

### 基础环境检查
- [x] Python 3.8+ 环境正常
- [x] 所有必需依赖包已安装
- [x] 项目文件结构完整
- [x] 模块导入无错误

### 核心功能检查
- [x] 数据收集功能正常（可获取中证指数数据）
- [x] 数据处理功能正常（可计算股息率指标）
- [x] 报告生成功能正常（可生成HTML报告和图表）
- [x] 多指数分析功能正常（可同时分析多个指数）
- [x] 错误处理机制完善

### GitHub Actions 配置检查
- [x] 工作流文件存在且配置正确
- [x] DINGTALK_WEBHOOK 环境变量配置检查
- [x] 依赖安装脚本完整
- [x] 系统字体配置正确

## 🚀 部署前准备

### 1. GitHub Secrets 配置（必需）
在 GitHub 仓库的 Settings → Secrets and variables → Actions 中添加：

```
Name: DINGTALK_WEBHOOK
Value: [你的钉钉机器人完整Webhook URL]
```

### 2. 钉钉机器人设置（推荐）
- 在钉钉群中添加自定义机器人
- 选择安全设置（建议使用关键词模式）
- 添加关键词：`AI投研助手`、`股息率`、`报告`、`分析`、`投资`
- 复制完整的 Webhook URL

### 3. 指数配置检查
默认配置的两个指数：
- 红利低波指数 (H30269)
- 红利低波100指数 (930955)

如需修改，请编辑 `index_config.py` 文件。

## 📋 部署验证清单

### 部署后立即检查
- [ ] GitHub Actions 工作流能否正常启动
- [ ] 依赖安装过程是否顺利完成
- [ ] 数据收集是否成功（网络连接正常）
- [ ] 报告是否成功生成并保存
- [ ] 钉钉消息是否收到（如果配置了Webhook）

### 日常监控检查
- [ ] 每日报告是否按时生成
- [ ] 钉钉推送是否正常工作
- [ ] 数据源URL是否仍然有效
- [ ] 系统日志是否有异常信息

## 🔧 常见问题处理

### 1. 钉钉推送失败
**现象**：报告显示生成成功但钉钉未收到消息
**解决方案**：
- 检查 DINGTALK_WEBHOOK 是否正确配置
- 确认钉钉机器人安全设置（IP白名单/关键词）
- 查看 GitHub Actions 日志中的具体错误信息

### 2. 数据获取失败
**现象**：无法获取指数数据
**解决方案**：
- 检查网络连接状态
- 验证数据源URL是否仍然有效
- 查看是否需要更新数据源地址

### 3. 图表显示异常
**现象**：生成的图表中文显示乱码或缺失
**解决方案**：
- GitHub Actions 已配置中文字体支持
- 本地测试时确保系统安装了中文字体

## 📊 性能监控

### 关键指标
- **执行时间**：单次完整分析应在5分钟内完成
- **成功率**：目标达到95%以上的执行成功率
- **资源使用**：内存占用应控制在合理范围内

### 日志监控
- 查看 `multi_index_dividend_analyzer.log` 文件
- 监控 GitHub Actions 运行日志
- 定期检查错误统计和趋势

## 🔄 维护计划

### 定期维护任务
- [ ] 每月检查数据源有效性
- [ ] 每季度审查和优化代码性能
- [ ] 根据需求调整指数配置
- [ ] 更新依赖包版本

### 升级注意事项
- 备份当前工作配置
- 在测试环境验证新版本
- 逐步部署到生产环境
- 密切监控部署后表现

---

**状态**：🟢 准备就绪，可以部署到GitHub Actions
**最后更新**：2026年2月4日
**负责人**：项目维护团队